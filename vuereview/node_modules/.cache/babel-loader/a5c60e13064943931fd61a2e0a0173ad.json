{"remainingRequest":"D:\\论文评审项目代码附带说明\\合并1.3\\vuereview\\node_modules\\babel-loader\\lib\\index.js!D:\\论文评审项目代码附带说明\\合并1.3\\vuereview\\src\\components\\pdf\\pdf.js","dependencies":[{"path":"D:\\论文评审项目代码附带说明\\合并1.3\\vuereview\\src\\components\\pdf\\pdf.js","mtime":1615517174000},{"path":"D:\\论文评审项目代码附带说明\\合并1.3\\vuereview\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\论文评审项目代码附带说明\\合并1.3\\vuereview\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkQ6L1x1OEJCQVx1NjU4N1x1OEJDNFx1NUJBMVx1OTg3OVx1NzZFRVx1NEVFM1x1NzgwMVx1OTY0NFx1NUUyNlx1OEJGNFx1NjYwRS9cdTU0MDhcdTVFNzYxLjMvdnVlcmV2aWV3L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0IHsgY3JlYXRlVk5vZGUgYXMgX2NyZWF0ZVZOb2RlIH0gZnJvbSAidnVlIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgZ2V0UGRmanNEaXN0IGZyb20gJy4vZ2V0UGRmanNEaXN0JzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdQZGYnLAogIHByb3BzOiB7CiAgICB1cmw6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiAnJwogICAgfSwKICAgIHR5cGU6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiAnY2FudmFzJwogICAgfSwKICAgIHBkZmpzRGlzdFBhdGg6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiAnLicKICAgIH0KICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBwZGZWaWV3ZXI6IG51bGwsCiAgICAgIHBkZkxpbmtTZXJ2aWNlOiBudWxsLAogICAgICBjdXJyZW50U2NhbGU6ICdwYWdlLXdpZHRoJywKICAgICAgbG9hZGluZ1Rhc2s6IG51bGwKICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBvblBhZ2VzSW5pdDogZnVuY3Rpb24gb25QYWdlc0luaXQoX3JlZikgewogICAgICB2YXIgc291cmNlID0gX3JlZi5zb3VyY2U7CiAgICAgIHNvdXJjZS5jdXJyZW50U2NhbGVWYWx1ZSA9IHRoaXMuY3VycmVudFNjYWxlOwogICAgfSwKICAgIHBkZkxpYkluaXQ6IGZ1bmN0aW9uIHBkZkxpYkluaXQoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHZhciBwZGZqc0xpYiwgcGRmanNWaWV3ZXIsIGNvbnRhaW5lciwgZXZlbnRCdXMsIHBkZkxpbmtTZXJ2aWNlLCBwZGZWaWV3ZXI7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgcGRmanNMaWIgPSB3aW5kb3cucGRmanNMaWI7CiAgICAgICAgICAgICAgICBwZGZqc1ZpZXdlciA9IHdpbmRvdy5wZGZqc1ZpZXdlcjsKCiAgICAgICAgICAgICAgICBpZiAoISghcGRmanNMaWIgfHwgIXBkZmpzVmlld2VyKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTY7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAzOwogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDY7CiAgICAgICAgICAgICAgICByZXR1cm4gZ2V0UGRmanNEaXN0KF90aGlzLnBkZmpzRGlzdFBhdGgpOwoKICAgICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgICBfdGhpcy5DTUFQX1VSTCA9ICIiLmNvbmNhdChfdGhpcy5wZGZqc0Rpc3RQYXRoLCAiL3BkZi9jbWFwcy8iKTsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKF90aGlzLkNNQVBfVVJMKTsKICAgICAgICAgICAgICAgIHBkZmpzTGliID0gd2luZG93LnBkZmpzTGliOwogICAgICAgICAgICAgICAgcGRmanNMaWIuR2xvYmFsV29ya2VyT3B0aW9ucy53b3JrZXJTcmMgPSAiIi5jb25jYXQoX3RoaXMucGRmanNEaXN0UGF0aCwgIi9wZGYvYnVpbGQvcGRmLndvcmtlci5qcyIpOwogICAgICAgICAgICAgICAgcGRmanNWaWV3ZXIgPSB3aW5kb3cucGRmanNWaWV3ZXI7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTY7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSAxMzoKICAgICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAxMzsKICAgICAgICAgICAgICAgIF9jb250ZXh0LnQwID0gX2NvbnRleHRbImNhdGNoIl0oMyk7CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgICAgY2FzZSAxNjoKICAgICAgICAgICAgICAgIGNvbnRhaW5lciA9IF90aGlzLiRyZWZzLmNvbnRhaW5lcjsKICAgICAgICAgICAgICAgIGV2ZW50QnVzID0gbmV3IHBkZmpzVmlld2VyLkV2ZW50QnVzKCk7IC8vIChPcHRpb25hbGx5KSBlbmFibGUgaHlwZXJsaW5rcyB3aXRoaW4gUERGIGZpbGVzLgoKICAgICAgICAgICAgICAgIHBkZkxpbmtTZXJ2aWNlID0gbmV3IHBkZmpzVmlld2VyLlBERkxpbmtTZXJ2aWNlKHsKICAgICAgICAgICAgICAgICAgZXZlbnRCdXM6IGV2ZW50QnVzCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIF90aGlzLnBkZkxpbmtTZXJ2aWNlID0gcGRmTGlua1NlcnZpY2U7CiAgICAgICAgICAgICAgICBwZGZWaWV3ZXIgPSBuZXcgcGRmanNWaWV3ZXIuUERGVmlld2VyKHsKICAgICAgICAgICAgICAgICAgY29udGFpbmVyOiBjb250YWluZXIsCiAgICAgICAgICAgICAgICAgIGV2ZW50QnVzOiBldmVudEJ1cywKICAgICAgICAgICAgICAgICAgbGlua1NlcnZpY2U6IHBkZkxpbmtTZXJ2aWNlLAogICAgICAgICAgICAgICAgICByZW5kZXJlcjogX3RoaXMudHlwZSwKICAgICAgICAgICAgICAgICAgdGV4dExheWVyTW9kZTogMCwKICAgICAgICAgICAgICAgICAgZG93bmxvYWRNYW5hZ2VyOiBuZXcgcGRmanNWaWV3ZXIuRG93bmxvYWRNYW5hZ2VyKHt9KSwKICAgICAgICAgICAgICAgICAgZW5hYmxlV2ViR0w6IHRydWUKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgX3RoaXMucGRmVmlld2VyID0gcGRmVmlld2VyOwogICAgICAgICAgICAgICAgcGRmTGlua1NlcnZpY2Uuc2V0Vmlld2VyKHBkZlZpZXdlcik7CiAgICAgICAgICAgICAgICBldmVudEJ1cy5vbigicGFnZXNpbml0IiwgX3RoaXMub25QYWdlc0luaXQpOwoKICAgICAgICAgICAgICBjYXNlIDI0OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSwgbnVsbCwgW1szLCAxM11dKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgcmVuZGVyUGRmOiBmdW5jdGlvbiByZW5kZXJQZGYoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgaWYgKCF0aGlzLnVybCkgewogICAgICAgIHJldHVybjsKICAgICAgfSAvLyBMb2FkaW5nIGRvY3VtZW50LgoKCiAgICAgIGlmICh0aGlzLnBkZlZpZXdlciA9PT0gbnVsbCB8fCB0aGlzLnBkZkxpbmtTZXJ2aWNlID09PSBudWxsKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBpZiAodGhpcy5sb2FkaW5nVGFzayAhPT0gbnVsbCkgewogICAgICAgIHRoaXMubG9hZGluZ1Rhc2suZGVzdHJveSgpOwogICAgICAgIHRoaXMubG9hZGluZ1Rhc2sgPSBudWxsOwogICAgICB9CgogICAgICB0aGlzLmxvYWRpbmdUYXNrID0gd2luZG93LnBkZmpzTGliLmdldERvY3VtZW50KHsKICAgICAgICBjTWFwVXJsOiB0aGlzLkNNQVBfVVJMLAogICAgICAgIGNNYXBQYWNrZWQ6IHRydWUsCiAgICAgICAgdXJsOiB0aGlzLnVybAogICAgICB9KTsKICAgICAgcmV0dXJuIHRoaXMubG9hZGluZ1Rhc2sucHJvbWlzZS50aGVuKGZ1bmN0aW9uIChwZGZEb2N1bWVudCkgewogICAgICAgIGlmIChwZGZEb2N1bWVudC5sb2FkaW5nVGFzay5kZXN0cm95ZWQgfHwgIV90aGlzMi51cmwpIHsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIF90aGlzMi5wZGZWaWV3ZXIuc2V0RG9jdW1lbnQocGRmRG9jdW1lbnQpOwoKICAgICAgICBfdGhpczIucGRmTGlua1NlcnZpY2Uuc2V0RG9jdW1lbnQocGRmRG9jdW1lbnQsIG51bGwpOwoKICAgICAgICBfdGhpczIubG9hZGluZ1Rhc2sgPSBudWxsOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7CiAgICAgIH0pOwogICAgfQogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgIHRoaXMucGRmTGliSW5pdCgpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICBfdGhpczMucmVuZGVyUGRmKCk7CiAgICB9KTsKICB9LAogIHdhdGNoOiB7CiAgICB1cmw6IGZ1bmN0aW9uIHVybCgpIHsKICAgICAgLy8g5aaC5p6c5a2Y5ZyocGRmVmlld2Vy5YiZ5Y+W5raI5riy5p+TCiAgICAgIGlmICh0aGlzLnBkZlZpZXdlcikgewogICAgICAgIHRoaXMucGRmVmlld2VyLl9jYW5jZWxSZW5kZXJpbmcoKTsKICAgICAgfQoKICAgICAgdGhpcy5yZW5kZXJQZGYoKTsKICAgIH0KICB9LAogIHJlbmRlcjogZnVuY3Rpb24gcmVuZGVyKCkgewogICAgcmV0dXJuIF9jcmVhdGVWTm9kZSgiZGl2IiwgewogICAgICAiY2xhc3MiOiAicGRmLXZpZXciCiAgICB9LCBbX2NyZWF0ZVZOb2RlKCJkaXYiLCB7CiAgICAgICJpZCI6ICJ2aWV3ZXJDb250YWluZXIiLAogICAgICAicmVmIjogImNvbnRhaW5lciIKICAgIH0sIFtfY3JlYXRlVk5vZGUoImRpdiIsIHsKICAgICAgImlkIjogInZpZXdlciIsCiAgICAgICJjbGFzcyI6ICJwZGZWaWV3ZXIiCiAgICB9LCBudWxsKV0pXSk7CiAgfQp9Ow=="},{"version":3,"sources":["D:/论文评审项目代码附带说明/合并1.3/vuereview/src/components/pdf/pdf.js"],"names":["getPdfjsDist","name","props","url","type","String","default","pdfjsDistPath","data","pdfViewer","pdfLinkService","currentScale","loadingTask","methods","onPagesInit","source","currentScaleValue","pdfLibInit","pdfjsLib","window","pdfjsViewer","CMAP_URL","console","log","GlobalWorkerOptions","workerSrc","container","$refs","eventBus","EventBus","PDFLinkService","PDFViewer","linkService","renderer","textLayerMode","downloadManager","DownloadManager","enableWebGL","setViewer","on","renderPdf","destroy","getDocument","cMapUrl","cMapPacked","promise","then","pdfDocument","destroyed","setDocument","catch","error","mounted","watch","_cancelRendering","render"],"mappings":"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","sourcesContent":["import getPdfjsDist from './getPdfjsDist'\r\n\r\nexport default {\r\n    name: 'Pdf',\r\n    props: {\r\n        url: {\r\n            type: String,\r\n            default: ''\r\n        },\r\n        type: {\r\n            type: String,\r\n            default: 'canvas'\r\n        },\r\n        pdfjsDistPath: {\r\n            type: String,\r\n            default: '.'\r\n        }\r\n    },\r\n    data() {\r\n        return {\r\n            pdfViewer: null,\r\n            pdfLinkService: null,\r\n            currentScale: 'page-width',\r\n            loadingTask: null\r\n        }\r\n    },\r\n\r\n    methods: {\r\n        onPagesInit({ source }) {\r\n            source.currentScaleValue = this.currentScale\r\n        },\r\n        async pdfLibInit() {\r\n            let pdfjsLib = window.pdfjsLib;\r\n            let pdfjsViewer = window.pdfjsViewer\r\n            if (!pdfjsLib || !pdfjsViewer) {\r\n                try {\r\n                    await getPdfjsDist(this.pdfjsDistPath)\r\n                    this.CMAP_URL = `${this.pdfjsDistPath}/pdf/cmaps/`;\r\n                    console.log( this.CMAP_URL)\r\n                    pdfjsLib = window.pdfjsLib;\r\n                    pdfjsLib.GlobalWorkerOptions.workerSrc = `${this.pdfjsDistPath}/pdf/build/pdf.worker.js`\r\n                    pdfjsViewer = window.pdfjsViewer\r\n                } catch (error) {\r\n                    // console.log(error)\r\n                    // pdfjs文件获取失败\r\n                    return\r\n                }\r\n            }\r\n\r\n            const container = this.$refs.container\r\n            const eventBus = new pdfjsViewer.EventBus();\r\n\r\n            // (Optionally) enable hyperlinks within PDF files.\r\n            const pdfLinkService = new pdfjsViewer.PDFLinkService({\r\n                eventBus: eventBus,\r\n            });\r\n            this.pdfLinkService = pdfLinkService\r\n            const pdfViewer = new pdfjsViewer.PDFViewer({\r\n                container: container,\r\n                eventBus: eventBus,\r\n                linkService: pdfLinkService,\r\n                renderer: this.type,\r\n                textLayerMode: 0,\r\n                downloadManager: new pdfjsViewer.DownloadManager({}),\r\n                enableWebGL: true\r\n            });\r\n            this.pdfViewer = pdfViewer\r\n            pdfLinkService.setViewer(pdfViewer);\r\n\r\n            eventBus.on(\"pagesinit\", this.onPagesInit);\r\n        },\r\n        renderPdf() {\r\n            if (!this.url) { return }\r\n            // Loading document.\r\n            if (this.pdfViewer === null || this.pdfLinkService === null) {\r\n                return\r\n            }\r\n            if (this.loadingTask !== null) {\r\n                this.loadingTask.destroy()\r\n                this.loadingTask = null\r\n            }\r\n            this.loadingTask = window.pdfjsLib.getDocument({\r\n                cMapUrl: this.CMAP_URL,\r\n                cMapPacked: true,\r\n                url: this.url,\r\n            });\r\n            return this.loadingTask.promise.then((pdfDocument) => {\r\n                if (pdfDocument.loadingTask.destroyed || !this.url) { return }\r\n                this.pdfViewer.setDocument(pdfDocument)\r\n                this.pdfLinkService.setDocument(pdfDocument, null);\r\n                this.loadingTask = null\r\n            }).catch(error => {\r\n                console.log(error)\r\n            });\r\n        }\r\n    },\r\n    mounted() {\r\n        this.pdfLibInit().then(() => {\r\n            this.renderPdf()\r\n        })\r\n    },\r\n    watch: {\r\n        url() {\r\n            // 如果存在pdfViewer则取消渲染\r\n            if (this.pdfViewer) {\r\n                this.pdfViewer._cancelRendering()\r\n            }\r\n            this.renderPdf()\r\n        }\r\n    },\r\n    render() {\r\n        return (\r\n            <div class=\"pdf-view\">\r\n                <div id=\"viewerContainer\" ref=\"container\">\r\n                    <div id=\"viewer\" class=\"pdfViewer\" />\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}"]}]}