{"remainingRequest":"D:\\qq文件\\合并2.0\\vuereview\\node_modules\\babel-loader\\lib\\index.js!D:\\qq文件\\合并2.0\\vuereview\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\qq文件\\合并2.0\\vuereview\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-1!D:\\qq文件\\合并2.0\\vuereview\\src\\views\\Login.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\qq文件\\合并2.0\\vuereview\\src\\views\\Login.vue","mtime":1640222012107},{"path":"D:\\qq文件\\合并2.0\\vuereview\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\qq文件\\合并2.0\\vuereview\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\qq文件\\合并2.0\\vuereview\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\qq文件\\合并2.0\\vuereview\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiRDovcXFcdTY1ODdcdTRFRjYvXHU1NDA4XHU1RTc2Mi4wL3Z1ZXJldmlldy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMiI7CmltcG9ydCByZXF1ZXN0IGZyb20gIi4uL3V0aWxzL3JlcXVlc3QiOwppbXBvcnQgSWRlbnRpZnkgZnJvbSAiLi4vY29tcG9uZW50cy9JZGVudGlmeSI7CmltcG9ydCB7IG1hcEFjdGlvbnMgfSBmcm9tICd2dWV4JzsKaW1wb3J0IEhlYWRlciBmcm9tICIuLi9jb21wb25lbnRzL0hlYWRlciI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiTG9naW4udnVlIiwKICBjb21wb25lbnRzOiB7CiAgICBJZGVudGlmeTogSWRlbnRpZnksCiAgICBIZWFkZXI6IEhlYWRlcgogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGNvZGU6ICIiLAogICAgICBmb3JtOiB7CiAgICAgICAgdXNlcm5hbWU6ICIiLAogICAgICAgIHBhc3N3b3JkOiAiIgogICAgICB9LAogICAgICBpZGVudGlmeUNvZGVzOiAnMTIzNDU2Nzg5MGFiY2RlZmpoaWprbGlub3BxcnNkdXZ3eHl6JywKICAgICAgaWRlbnRpZnlDb2RlOiAnJywKICAgICAgcnVsZXM6IHsKICAgICAgICB1c2VybmFtZTogW3sKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgbWVzc2FnZTogJ+ivt+i+k+WFpeeUqOaIt+WQjScsCiAgICAgICAgICB0cmlnZ2VyOiAnYmx1cicKICAgICAgICB9XSwKICAgICAgICBwYXNzd29yZDogW3sKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgbWVzc2FnZTogJ+ivt+i+k+WFpeWvhueggScsCiAgICAgICAgICB0cmlnZ2VyOiAnYmx1cicKICAgICAgICB9XSAvLyBjb2RlOiBbeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogIuivt+i+k+WFpemqjOivgeeggSIsIHRyaWdnZXI6ICJibHVyIiB9XQoKICAgICAgfQogICAgfTsKICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICAvLyDliJ3lp4vljJbpqozor4HnoIEKICAgIHRoaXMuaWRlbnRpZnlDb2RlID0gJyc7CiAgICB0aGlzLm1ha2VDb2RlKHRoaXMuaWRlbnRpZnlDb2RlcywgNCk7CiAgfSwKICBtZXRob2RzOiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIG1hcEFjdGlvbnMoImQyYWRtaW4vYWNjb3VudCIsIFsibG9naW4iXSkpLCB7fSwgewogICAgLy8g6YeN572u6aqM6K+B56CBCiAgICByZWZyZXNoQ29kZTogZnVuY3Rpb24gcmVmcmVzaENvZGUoKSB7CiAgICAgIHRoaXMuaWRlbnRpZnlDb2RlID0gJyc7CiAgICAgIHRoaXMubWFrZUNvZGUodGhpcy5pZGVudGlmeUNvZGVzLCA0KTsKICAgIH0sCiAgICBtYWtlQ29kZTogZnVuY3Rpb24gbWFrZUNvZGUobywgbCkgewogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGw7IGkrKykgewogICAgICAgIHRoaXMuaWRlbnRpZnlDb2RlICs9IHRoaXMuaWRlbnRpZnlDb2Rlc1t0aGlzLnJhbmRvbU51bSgwLCB0aGlzLmlkZW50aWZ5Q29kZXMubGVuZ3RoKV07CiAgICAgIH0KICAgIH0sCiAgICByYW5kb21OdW06IGZ1bmN0aW9uIHJhbmRvbU51bShtaW4sIG1heCkgewogICAgICByZXR1cm4gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKG1heCAtIG1pbikgKyBtaW4pOwogICAgfSwKICAgIGxvZ2luOiBmdW5jdGlvbiBsb2dpbigpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIGlmICh0aGlzLmNvZGUudG9Mb3dlckNhc2UoKSAhPT0gdGhpcy5pZGVudGlmeUNvZGUudG9Mb3dlckNhc2UoKSkgewogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+ivt+Whq+WGmeato+ehrumqjOivgeeggScpOwogICAgICAgIHRoaXMucmVmcmVzaENvZGUoKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHRoaXMuJHJlZnNbJ2Zvcm0nXS52YWxpZGF0ZShmdW5jdGlvbiAodmFsaWQpIHsKICAgICAgICBpZiAodmFsaWQpIHsKICAgICAgICAgIHJlcXVlc3QucG9zdCgiL3VzZXIvbG9naW4iLCBfdGhpcy5mb3JtKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgY29uc29sZS5sb2cocmVzKTsKCiAgICAgICAgICAgIGlmIChyZXMuY29kZSA9PT0gJzAnKSB7CiAgICAgICAgICAgICAgLy8uY29kZSA9PT0gMCkgewogICAgICAgICAgICAgIC8vdGhpcy4kcm91dGVyLnB1c2goIi8iKQogICAgICAgICAgICAgIF90aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgICAgIHR5cGU6ICJzdWNjZXNzIiwKICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICLnmbvlvZXmiJDlip8iCiAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oInVzZXIiLCBKU09OLnN0cmluZ2lmeShyZXMuZGF0YSkpOyAvL3Nlc3Npb25TdG9yYWdlLnNldEl0ZW0oInVzZXJuYW1lIix0aGlzLmZvcm0udXNlcm5hbWUpOwoKICAgICAgICAgICAgICBfdGhpcy4kcm91dGVyLnB1c2goIi8iKTsgLy/nmbvlvZXmiJDlip/lkI7pobXpnaLot7PovawKCgogICAgICAgICAgICAgIEhlYWRlci5kaWFsb2dWaXNpYmxlID0gdHJ1ZTsKICAgICAgICAgICAgICBIZWFkZXIubWV0aG9kcy5sb2FkKCk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgX3RoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICAgICAgdHlwZTogImVycm9yIiwKICAgICAgICAgICAgICAgIG1lc3NhZ2U6IHJlcy5tc2cKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9KTsgLy90aGlzLiRyb3V0ZXIucHVzaCgiLyIpCiAgICB9CiAgfSkKfTs="},{"version":3,"sources":["D:\\qq文件\\合并2.0\\vuereview\\src\\views\\Login.vue"],"names":[],"mappings":"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","sourcesContent":["\n<template>\n\n  <div class=\"login\" >\n    <div class=\"back\" >\n      <div class=\"main\" >\n\n        <el-form ref=\"form\" :model=\"form\" size=\"normal\" :rules=\"rules\">\n          <el-form-item prop=\"username\">\n            <el-input prefix-icon=\"el-icon-user-solid\" placeholder=\"请输入用户名/工号/学号\" v-model=\"form.username\"></el-input>\n          </el-form-item>\n          <el-form-item prop=\"password\">\n            <el-input prefix-icon=\"el-icon-lock\" placeholder=\"请输入密码\" v-model=\"form.password\" show-password></el-input>\n          </el-form-item>\n          <el-form-item prop=\"code\">\n            <el-input prefix-icon=\"el-icon-key\" type=\"text\" v-model=\"code\" placeholder=\"请输入验证码\" style=\"width: 60%\">\n\n\n            </el-input>\n            <template slot=\"prepend\">验证码</template>\n            <template slot=\"append\">\n\n            </template>\n            <div class=\"login-code\" @click=\"refreshCode\">\n              <Identify :identifyCode=\"identifyCode\"></Identify>\n            </div>\n<!--            <div class=\"login-code\" @click=\"refreshCode\">-->\n<!--              <Identify :identifyCode=\"identifyCode\"></Identify>-->\n<!--            </div>-->\n          </el-form-item>\n          <el-form-item>\n            <el-button style=\"width:100%;font-family:'黑体';background:rgba(20,100,238,0.64);font-size: large\" type=\"primary\" @click=\"login\">登录</el-button>\n          </el-form-item>\n        </el-form>\n      </div>\n    </div>\n\n  </div>\n</template>\n\n<script>\nimport request from \"../utils/request\";\nimport Identify from \"../components/Identify\"\nimport { mapActions } from 'vuex'\nimport Header from \"../components/Header\"\n\nexport default {\n  name: \"Login.vue\",\n  components: {\n    Identify,\n    Header\n  },\n  data() {\n    return {\n      code: \"\",\n      form: {\n        username: \"\",\n        password: \"\",\n\n      },\n      identifyCodes: '1234567890abcdefjhijklinopqrsduvwxyz',\n      identifyCode: '',\n      rules: {\n        username: [\n          {required: true, message: '请输入用户名',trigger: 'blur'},\n        ],\n        password: [\n          {required: true, message: '请输入密码',trigger: 'blur'},\n        ],\n        // code: [{ required: true, message: \"请输入验证码\", trigger: \"blur\" }]\n      },\n\n    }\n  },\n  mounted () {\n    // 初始化验证码\n    this.identifyCode = ''\n    this.makeCode(this.identifyCodes, 4)\n  },\n  methods: {\n    // 引入验证接口\n    ...mapActions(\"d2admin/account\", [\"login\"]),\n    // 重置验证码\n    refreshCode () {\n      this.identifyCode = ''\n      this.makeCode(this.identifyCodes, 4)\n    },\n    makeCode (o, l) {\n      for (let i = 0; i < l; i++) {\n        this.identifyCode += this.identifyCodes[this.randomNum(0, this.identifyCodes.length)]\n      }\n    },\n    randomNum (min, max) {\n      return Math.floor(Math.random() * (max - min) + min)\n    },\n\n    login() {\n      if (this.code.toLowerCase() !== this.identifyCode.toLowerCase()) {\n        this.$message.error('请填写正确验证码')\n        this.refreshCode()\n        return\n      }\n      this.$refs['form'].validate((valid)=>{\n        if(valid) {\n          request.post(\"/user/login\", this.form).then(res => {\n            console.log(res)\n            if (res.code==='0'){ //.code === 0) {\n\n              //this.$router.push(\"/\")\n              this.$message({\n                type: \"success\",\n                message: \"登录成功\"\n              })\n\n              sessionStorage.setItem(\"user\",JSON.stringify(res.data))\n              //sessionStorage.setItem(\"username\",this.form.username);\n              this.$router.push(\"/\")  //登录成功后页面跳转\n              Header.dialogVisible=true\n              Header.methods.load()\n\n            } else {\n              this.$message({\n                type: \"error\",\n                message: res.msg\n              })\n            }\n          })\n\n        }\n      })\n      //this.$router.push(\"/\")\n    }\n  }\n}\n</script>\n\n\n<style rel=\"stylesheet/scss\" lang=\"scss\">\n.login {\n  //width: 100%;\n  //height: 100ch;\n  vertical-align: middle;\n  overflow-x:hidden;\n  overflow-y:hidden;\n  display: flex;\n  //justify-content: left;\n  align-items: center;\n\n  background-image: url(\"../assets/images/背景.jpg\");\n  background-size: 1500px 800px;\n  background-attachment:fixed;\n  background-repeat:no-repeat;\n}\n.back {\n  margin-top: 80px;\n  margin-left: auto;\n  margin-right: auto;\n  //text-align: center;\n  width:1200px;\n  height: 800px;\n  background-image: url(\"../assets/images/小背景新.png\");\n  background-size: 1200px 675px;\n  background-repeat:no-repeat;\n  //background-attachment:fixed;\n  //filter:alpha(Opacity=60);-moz-opacity:0.6;opacity: 0.6\n}\n.main {\n  display: block;\n  margin-top: 280px;\n  margin-left: 60px;\n  width:350px;\n  //filter:alpha(Opacity=60);-moz-opacity:0.6;opacity: 0.6\n}\n.title {\n  margin: 0px auto 30px auto;\n  text-align: left;\n  color: #1414ee;\n}\n\n.login-form {\n  border-radius: 6px;\n  background: #ffffff;\n  width: 400px;\n  padding: 25px 25px 5px 25px;\n  .el-input {\n    height: 38px;\n    input {\n      height: 38px;\n    }\n  }\n  .input-icon {\n    height: 39px;\n    width: 14px;\n    margin-left: 2px;\n  }\n}\n.login-tip {\n  font-size: 13px;\n  text-align: center;\n  color: #bfbfbf;\n}\n.login-code {\n  width: 33%;\n  height: 38px;\n  float: right;\n  img {\n    cursor: pointer;\n    vertical-align: middle;\n  }\n}\n\n\n.el-login-footer {\n  height: 40px;\n  line-height: 40px;\n  position: fixed;\n  bottom: 0;\n  width: 100%;\n  text-align: center;\n  color: #fff;\n  font-family: Arial;\n  font-size: 12px;\n  letter-spacing: 1px;\n}\n.login-code-img {\n  height: 38px;\n}\n\n</style>"],"sourceRoot":""}]}