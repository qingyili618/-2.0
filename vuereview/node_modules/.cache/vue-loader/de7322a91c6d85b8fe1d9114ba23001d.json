{"remainingRequest":"E:\\thesisSystem\\合并1.9\\vuereview\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-1!E:\\thesisSystem\\合并1.9\\vuereview\\src\\views\\Home.vue?vue&type=style&index=0&id=fae5bece&scoped=true&lang=css","dependencies":[{"path":"E:\\thesisSystem\\合并1.9\\vuereview\\src\\views\\Home.vue","mtime":1639966239549},{"path":"E:\\thesisSystem\\合并1.9\\vuereview\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\thesisSystem\\合并1.9\\vuereview\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader-v16\\dist\\stylePostLoader.js","mtime":499162500000},{"path":"E:\\thesisSystem\\合并1.9\\vuereview\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"E:\\thesisSystem\\合并1.9\\vuereview\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\thesisSystem\\合并1.9\\vuereview\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ci5lbC1wYWdpbmF0aW9uIHsKICB0ZXh0LWFsaWduOiBjZW50ZXI7Cn0KCg=="},{"version":3,"sources":["E:\\thesisSystem\\合并1.9\\vuereview\\src\\views\\Home.vue"],"names":[],"mappings":";AAkOA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;EACb,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AACpB","file":"E:/thesisSystem/合并1.9/vuereview/src/views/Home.vue","sourceRoot":"","sourcesContent":["<template>\n  <div style=\"margin:10px 0;flex:1 1 0%;\">\n    <div style=\"margin-top: 5px;\n    margin-left: 10px;\n    font-size: 14px;\n    color: rgb(102, 102, 102);\">\n      当前位置：主页\n    </div>\n    <div style=\"height:0.8px;background-color: rgb(102, 102, 102);margin-top: 5px\" ></div>\n    <div style=\"margin:10px 0;margin-left: 30px\">\n      <el-row :gutter=\"12\">\n        <el-badge :value=\"value\" class=\"item\">\n          <el-button size=\"big\">待办事宜</el-button>\n        </el-badge>\n        <el-col :span=\"3\">\n\n        </el-col>\n\n<!--        <el-col :span=\"8\">-->\n<!--          <el-card shadow=\"hover\"> 公告 </el-card>-->\n<!--        </el-col>-->\n<!--        <el-col :span=\"8\">-->\n<!--          <el-card shadow=\"never\"> 欢迎 </el-card>-->\n<!--        </el-col>-->\n      </el-row>\n    </div>\n    <div style=\"margin:20px 20px;\">\n      <el-table :data=\"tableData\" border\n                :default-sort = \"{prop: 'time', order: 'descending'}\"\n                :header-cell-style=\"{background:'#f5f7fa',color:'#02468f'}\" style=\"width: 95%\">\n        <el-table-column prop=\"role\" label=\"任务角色 \" width=200px align=\"center\"/>\n        <el-table-column prop=\"send\" label=\"发送方\"  align=\"center\"/>\n        <el-table-column prop=\"info\" label=\"消息内容\"  align=\"center\"/>\n        <el-table-column prop=\"time\" label=\"发送时间\"  align=\"center\" sortable/>\n        <el-table-column prop=\"status\" label=\"阅读状态\"  sortable align=\"center\">\n          <template #default=\"scope1\">\n            <span v-if=\"JSON.parse(JSON.stringify(scope1.row)).status== '已读'\" style=\"color: #11b95c\">已读</span>\n            <span v-else style=\"color: red\">未读</span>\n          </template>\n\n        </el-table-column>\n<!--        <el-table-column prop=\"status\" label=\"阅读状态\"  sortable align=\"center\"/>-->\n\n        <el-table-column fixed=\"right\" label=\"操作\" width=\"160\" align=\"center\">\n          <template #default=\"scope\">\n            <el-button type=\"primary\" size=\"mini\"  @click=\"confirm(scope.row)\">确认</el-button>\n\n          </template>\n        </el-table-column>\n\n\n      </el-table>\n    </div>\n    <div id=\"main\" style=\"margin: 20px 0\">\n      <el-pagination\n          v-model:currentPage=\"currentPage\"\n          :page-sizes=\"[5, 10, 20]\"\n          :page-size=\"pageSize\"\n          layout=\"total, sizes, prev, pager, next, jumper\"\n          :total=\"total\"\n          @size-change=\"handleSizeChange\"\n          @current-change=\"handleCurrentChange\">\n      </el-pagination>\n\n    </div>\n    <div style=\"color:rgb(102, 102, 102);margin-left: 40px;margin-top: 40px;font-family: 华文仿宋 \">\n      <div>\n        咨询电话：16673135278\n      </div>\n      <div>\n        咨询时间：工作日8:30-17:30\n      </div>\n      <div>\n        1、关于常规业务流程、操作方法等问题，可查看右侧“常见问题”或直接咨询上级团组织管理员；\n      </div>\n      <div>\n        2、如有其他技术问题，可将问题详情和系统截图发送至邮箱：1789043007@qq.com。\n      </div>\n    </div>\n\n  </div>\n</template>\n<script>\nimport request from \"../utils/request\";\nimport global from \"../layout/Layout\"\n\nexport default {\n  name: \"Home\",\n  data() {\n    return {\n      dialogVisible:false,\n      role1:{\n        role:''\n      },\n      value:'',\n      tableData:[],//add_lqy\n      currentPage: 1,\n      pageSize: 10,\n      total: 0,\n      form:{},\n      status:'',\n      multipleSelection: [],//role choice\n      // path: this.$route.path  //设置默认高亮 前面可以加user:{}\n    }\n  },\n  created() {\n    this.load()\n  },\n  methods:{\n    confirm(row){\n      this.form=JSON.parse(JSON.stringify(row))\n      this.$confirm(this.form.info, this.form.role, {\n        distinguishCancelAndClose: true,\n        confirmButtonText: '确认',\n        cancelButtonText: '取消'\n      }).then(() => {\n            this.$message({\n              type: 'info',\n              message: '保存修改'\n            });\n            this.form.status=\"已读\"\n            request.put(\"/information\", this.form)\n            this.load()\n            this.load()\n          })\n\n    },\n    load(){\n\n\n\n      let userStr = sessionStorage.getItem(\"user\") || \"{}\"\n      this.user = JSON.parse(userStr)\n      // const id = parseInt(this.user)\n      console.log(this.user.username)\n\n      //let id=1\n      //role\n      request.get(\"/roleallocation\",{\n        params: {\n          employeeId: this.user.username\n        }\n      }).then(res =>{\n        // console.log(res)\n        if(res.code==='0') {\n          this.dtableData=res.data\n          this.dialogVisible=true\n        }\n      })\n      //info\n      request.get(\"/information/count\",{\n        params: {\n          userid: this.user.username\n        }\n      }).then(res=>{\n        // console.log(res)\n        if(res.data==0){\n          this.value=''\n        }\n        else{\n          this.value=res.data\n        }\n\n\n      })\n      request.get(\"/information\",{\n        params: {\n          pageNum: this.currentPage,\n          pageSize: this.pageSize,\n          userid: this.user.username\n        }\n      }).then(res=>{\n        // console.log(res)\n        this.tableData=res.data.records\n        this.total=res.data.total\n      })\n\n    },\n    handleSizeChange(pageSize){\n      this.pageSize=pageSize\n      this.load()\n\n    },\n    handleCurrentChange(pageNum){\n      this.currentPage=pageNum\n      this.load()\n\n    },\n\n    save(){\n      this.role1.role = this.multipleSelection[0].name\n      sessionStorage.setItem(\"role\",JSON.stringify(this.role1))\n      this.dialogVisible=false\n      this.$message({\n        type: \"success\",\n        message: \"角色选择成功\"\n      })\n      global.methods.reload()\n    },\n    select(selection, row) {\n      if (selection.length > 1) {\n        let del_row = selection.shift()\n        this.$refs.multipleTable.toggleRowSelection(del_row, false)\n        // this.$message({\n        //   type: \"error\",\n        //   message: \"已选择超过三位评审专家！\"\n        // })\n      }\n    },\n    selectAll(selection){\n      if (selection.length > 1) {\n        selection.length = 1\n\n      }\n\n    },\n    handleSelectionChange(val) {\n      this.multipleSelection = val;\n      console.log(this.multipleSelection)\n    },\n\n  }\n}\n\n</script>\n<style scoped>\n.el-pagination {\n  text-align: center;\n}\n\n</style>"]}]}