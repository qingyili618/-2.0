{"remainingRequest":"D:\\college\\3.1\\PaperSystems\\1217\\vuereview\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-1!D:\\college\\3.1\\PaperSystems\\1217\\vuereview\\src\\views\\Thesis.vue?vue&type=style&index=0&id=f969b0f4&lang=scss&scoped=true","dependencies":[{"path":"D:\\college\\3.1\\PaperSystems\\1217\\vuereview\\src\\views\\Thesis.vue","mtime":1639792265733},{"path":"D:\\college\\3.1\\PaperSystems\\1217\\vuereview\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\college\\3.1\\PaperSystems\\1217\\vuereview\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader-v16\\dist\\stylePostLoader.js","mtime":499162500000},{"path":"D:\\college\\3.1\\PaperSystems\\1217\\vuereview\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"D:\\college\\3.1\\PaperSystems\\1217\\vuereview\\node_modules\\sass-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\college\\3.1\\PaperSystems\\1217\\vuereview\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\college\\3.1\\PaperSystems\\1217\\vuereview\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ci5maWxlUHJldmlld3sKICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgdG9wOiAwOwogIGxlZnQ6IDA7CiAgd2lkdGg6IDEwMCU7CiAgaGVpZ2h0OiAxMDAlOwogIHotaW5kZXg6IDk5OTsKICBiYWNrZ3JvdW5kOiByZ2JhKCRjb2xvcjogIzAwMDAwMCwgJGFscGhhOiAwLjQpOwogIG1pbi1oZWlnaHQ6IDUwMHB4OwogIG92ZXJmbG93OiBhdXRvOwogIC5maWxlUHJldmlld19jZW50ZXJ7CiAgICB3aWR0aDogNTAlOwogICAgaGVpZ2h0OiAxMDAlOwogICAgbGVmdDogMjUlOwogICAgYmFja2dyb3VuZDogd2hpdGU7CiAgICBib3JkZXItdG9wLXJpZ2h0LXJhZGl1czogM3B4OwogICAgYm9yZGVyLXRvcC1sZWZ0LXJhZGl1czogM3B4OwogICAgcG9zaXRpb246IHJlbGF0aXZlOwogICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC01MCUgLTUwJSk7CiAgICBwYWRkaW5nOiAxNnB4OwogICAgLmNlbnRlcl9oZWFkZXJ7CiAgICAgIHBhZGRpbmctYm90dG9tOiAxMHB4OwogICAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgI2RlZTJlZDsKICAgICAgZGlzcGxheTogZmxleDsKICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAgICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOwogICAgICBib3JkZXItcmFkaXVzOiAzcHg7CiAgICAgIC5oZWFkZXJfbGVmdHsKICAgICAgICBmb250LXdlaWdodDogYm9sZDsKICAgICAgfQogICAgICAuaGVhZGVyX3JpZ2h0ewogICAgICAgIGN1cnNvcjogcG9pbnRlcjsKICAgICAgICBjb2xvcjogIzk5YTFhZDsKICAgICAgfQogICAgfQogICAgLmNlbnRlcl9jZW50ZXJ7CiAgICAgIGJvcmRlci1yYWRpdXM6IDNweDsKICAgICAgd2lkdGg6IDEwMCU7CiAgICAgIGhlaWdodDogMTAwJTsKICAgIH0KICB9Cn0KLmVsLXBhZ2luYXRpb24gewogIHRleHQtYWxpZ246IGNlbnRlcjsKfQo="},{"version":3,"sources":["D:\\college\\3.1\\PaperSystems\\1217\\vuereview\\src\\views\\Thesis.vue"],"names":[],"mappings":"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","file":"D:/college/3.1/PaperSystems/1217/vuereview/src/views/Thesis.vue","sourceRoot":"","sourcesContent":["<template>\n  <div style=\"padding:10px\">\n    <!-- 功能区域 -->\n    <div style=\"margin:10px 0\">\n      <el-button type=\"primary\" >新增</el-button>\n      <el-button type=\"primary\">导入</el-button>\n      <el-button type=\"primary\">导出</el-button>\n    </div>\n    <!-- 搜索区域 -->\n    <div style=\"margin: 10px 0\">\n      <!--      <el-input v-model=\"search\" placeholder=\"请输入关键字\" style=\"width: 20%\" clearable></el-input>-->\n      <el-select v-model=\"academicYear\" style=\"margin-left: 5px\" placeholder=\"选择学年\">\n        <el-option\n            v-for=\"item in distinctYear\"\n            :key=\"item.academicYear\"\n            :label=\"item.academicYear\"\n            :value=\"item.academicYear\"\n        >\n        </el-option>\n      </el-select>\n      <el-select v-model=\"semester\" style=\"margin-left: 5px\" placeholder=\"选择学期\">\n        <el-option\n            v-for=\"item in semOptions\"\n            :key=\"item.semester\"\n            :label=\"item.label\"\n            :value=\"item.semester\"\n        >\n        </el-option>\n      </el-select>\n      <el-select v-model=\"type\" style=\"margin-left: 5px\" placeholder=\"选择论文类型\">\n        <el-option\n            v-for=\"item in typeOptions\"\n            :key=\"item.type\"\n            :label=\"item.label\"\n            :value=\"item.type\"\n        >\n        </el-option>\n      </el-select>\n      <el-button type=\"primary\" style=\"margin-left: 5px\" @click=\"load\">查询</el-button>\n    </div>\n    <el-table :data=\"tableData\" border style=\"width: 100%\">\n      <el-table-column prop=\"thesisid\" label=\"论文编号\" sortable />\n      <el-table-column prop=\"title\" label=\"题目\"  />\n<!--      <el-table-column prop=\"author\" label=\"学生姓名\"  />-->\n<!--      <el-table-column prop=\"supervisor\" label=\"导师姓名\"  />-->\n      <el-table-column prop=\"department\" label=\"所在系\" />\n      <el-table-column prop=\"submitTime\" value-format=\"YYYY-MM-DD\" label=\"提交时间\" />\n      <el-table-column prop=\"reviewernum\" v-if=false label=\"已分配专家数\" />\n      <el-table-column prop=\"memo\" label=\"说明\" />\n<!--      <el-table-column prop=\"url\" label=\"论文编号\" />-->\n\n      <el-table-column fixed=\"right\" label=\"操作\" width=\"160\">\n        <template #default=\"scope\">\n<!--:disabled=\"this.isfinish==1\"-->\n          <el-button size=\"mini\"   @click=\"previewPDF(scope.row)\" >评审</el-button>\n          <el-popconfirm title=\"确定不评审吗?\" @confirm=\"handleDelete(scope.row)\">\n            <template #reference>\n              <el-button size=\"mini\" type=\"danger\"  @click=\"back(scope.row)\">退回</el-button>\n            </template>\n          </el-popconfirm>\n        </template>\n      </el-table-column>\n    </el-table>\n    <div style=\"margin: 10px 0\">\n      <el-pagination\n          v-model:currentPage=\"currentPage\"\n          :page-sizes=\"[5, 10, 20]\"\n          :page-size=\"pageSize\"\n          layout=\"total, sizes, prev, pager, next, jumper\"\n          :total=\"total\"\n          @size-change=\"handleSizeChange\"\n          @current-change=\"handleCurrentChange\">\n      </el-pagination>\n\n      <el-dialog\n          v-model=\"dialogVisible\"\n          title=\"论文预览PDF\"\n          width=\"1250px\"\n          height=\"1000px\">\n        <div id=\"container\" style=\"width:100%;height:100%;overflow:hidden;\">\n\n          <div  >\n            <iframe :src=\"pdfUrl\" frameborder=\"1\" style=\"width:700px;height:1000px;float:left;\"></iframe>\n          </div>\n          <div id=\"scoretable\" style=\"width:500px;padding-left:10px;float:left;\">\n            <!-- canvas渲染方式 -->\n            <el-form :model=\"form\" >\n              <el-form-item label=\"论文题目\">\n                <el-input v-model=\"form.title\" disabled></el-input>\n              </el-form-item>\n              <el-form-item label=\"论文编号\">\n                <el-input v-model=\"thesisid\" disabled></el-input>\n              </el-form-item>\n              <!--<el-row>\n                <el-col :span=\"6\"><div class=\"grid-content bg-purple\">评价指标</div></el-col>\n                <el-col :span=\"6\"><div class=\"grid-content bg-purple-light\">分值</div></el-col>\n                <el-col :span=\"6\"><div class=\"grid-content bg-purple\"></div>评价内容</el-col>\n                <el-col :span=\"6\"><div class=\"grid-content bg-purple-light\">评分</div></el-col>\n              </el-row>\n              -->\n              <el-table :data=\"dtableData\" border>\n                <el-table-column prop=\"index\" label=\"评价指标\" width=\"100px\" />\n                <el-table-column prop=\"score\" label=\"分值\" width=\"80px\" />\n                <el-table-column prop=\"factor\" label=\"评价要素\" width=\"200px\" />\n                <el-table-column prop=\"grade\" label=\"评分\" width=\"100px\" >\n                  <!-- vue2.6后自定义列放弃了slot-scope插槽(网上相关的方法会导致控件显示不了），改用v-slot，这里用了简化版，让没有input和每行数据绑定 -->\n                  <!-- 搜素： vue3使用element-plus的自定义列表格-->\n                  <template #default=\"scope\">\n                  <el-input v-model=\"scope.row.grade\"></el-input>\n                  </template>\n                </el-table-column>\n              </el-table>\n\n              <el-form-item label=\"综合评价\" style=\"padding-top:10px\">\n                <el-radio-group v-model=\"qualified\" label=\"综合评价\"  >\n                  <el-radio :label=\"1\">合格</el-radio>\n                  <el-radio :label=\"2\">不合格</el-radio>\n                </el-radio-group>\n              </el-form-item>\n\n\n              <el-form-item label=\"修改意见:\">\n                <el-input\n                    v-model=\"textarea\"\n                    :rows=\"20\"\n                    type=\"textarea\"\n                    placeholder=\"修改意见\"\n                />\n              </el-form-item>\n\n            </el-form>\n\n          </div>\n\n        </div>\n\n        <template #footer>\n          <span class=\"dialog-footer\">\n            <el-button @click=\"dialogVisible = false\">取消</el-button>\n\n            <el-button type=\"primary\" @click=\"save\">确定</el-button>\n          </span>\n        </template>\n      </el-dialog>\n\n    </div>\n  </div>\n</template>\n\n<script>\n// @ is an alias to /src\n\n\nimport request from \"../utils/request\";\nimport pdf from \"@/components/pdf/pdf\";\nimport {ref} from 'vue';\nexport default {\n  name: 'Home',\n  components: {\n    pdf\n\n  },\n  data() {\n    return {\n      reviewednum:0,\n      isfinish:0,\n      distinctYear:[],\n      academicYear:'',\n      semOptions:ref([\n        {\n          semester: '第一学期',\n          label: '第一学期',\n        },\n        {\n          semester: '第二学期',\n          label: '第二学期',\n        }]),\n      semester:ref(''),\n      typeOptions:ref([\n        {\n          type: '学硕',\n          label: '学硕',\n        },\n        {\n          type: '专硕',\n          label: '专硕',\n        }]),\n      type:ref(''),\n      batch:'',\n      gradeid:\"\",\n      form:{\n      },\n      eval: {\n        thesisid: null,\n        reviewer: '',\n        grade1: null,\n        grade2:null,\n        grade3: null,\n        grade4: null,\n        grade5: null,\n        total: null,\n        qualified: null,\n        comments: '',\n        submitTime: null,\n      },\n\n      dtableData:[\n        {\n          index: '选题与综述',\n          score: 20,\n          factor: '选题来源于企业管理实践，符合专业学位要求。文献系统，评述客观',\n          grade: null,\n\n        },\n        {\n          index: '理论知识',\n          score: 30,\n          factor: '基础理论坚实',\n          grade: null,\n\n        },\n        {\n          index: '方法与能力',\n          score: 15,\n          factor: '科学合理的研究方法',\n          grade: null,\n\n        },\n        {\n          index: '应用价值',\n          score: 15,\n          factor: '具有实践应用价值',\n          grade: null,\n\n        },\n        {\n          index: '论文写作',\n          score: 20,\n          factor: '逻辑严谨，行文规范',\n          grade: null,\n\n        },\n      ],\n      message: '',\n      textarea: '',\n      dialogVisible: false,\n      search:'',\n      currentPage: 1,\n      pageSize: 10,\n      total: 0,\n      tableData:[],\n      scr: null,\n      pdfPage: 1,\n      pageCount: 0,\n      pdfUrl: \"\",\n      evaluation: null,\n      thesisid: null,\n      qualified: ref(1)\n\n\n\n    }\n  },\n  // created() {\n  //   this.load()\n  // },\n  mounted() {\n    this.getYear();\n  },\n  methods:{\n    //PDF论文预览\n    previewPDF(row){\n      this.form.id=row.id\n      this.isfinish=0\n      this.thesisid=row.thesisid;\n      this.dialogVisible = true;\n      this.form=JSON.parse(JSON.stringify(row));\n      this.pdfUrl=\"/\"+row.url+\".pdf\";\n      let userJson=sessionStorage.getItem(\"user\");\n      let user=JSON.parse(userJson)\n      request.get(\"/grade/returnID/\", {\n        params: {\n          thesisid:row.thesisid,\n          reviewer:user.username,\n          //option: this.options,\n        }\n      }).then(res => {\n        this.gradeid=res.data\n        this.eval.id=this.gradeid\n        console.log(\"this.gradeid\",this.gradeid)\n      })\n      console.log(\"row.thesisid\",row.thesisid)\n      request.get(\"/thesis/getreviewednum\",{\n        params: {\n          thesisid:row.thesisid,\n        }\n      }).then(res => {\n        console.log(\"res\",res)\n        this.reviewednum=res.data[0].reviewednum\n        console.log(\"this.reviewednum\",this.reviewednum)\n      })\n\n    },\n\n    //关闭窗口初始化PDF页码\n    closeDialog(){\n      this.pdfPage = 1;\n    },\n\n    //PDF改变页数\n    previousPage(){\n      let p = this.pdfPage\n      p = p>1?p-1:this.pageCount\n      this.pdfPage = p\n    },\n    nextPage(){\n      let p = this.pdfPage\n      p = p<this.pageCount?p+1:1\n      this.pdfPage = p\n    },\n    getYear(){\n      request.put(\"/batch/distinctYear\").then(res=>{\n        console.log(res)\n        this.distinctYear=res.data\n        this.total=res.data.total\n      })\n    },\n    load(){\n      new Promise((resolve,reject)=>{\n        request.get(\"/batch/getbatchID\",{\n          params:{\n            year:this.academicYear,\n            semester:this.semester,\n            type:this.type\n          }\n        }).then(res=>{\n          console.log(res)\n          resolve(res.data)\n        })\n      }).then(res1=>{\n        let userJson=sessionStorage.getItem(\"user\");\n        let user=JSON.parse(userJson)\n        request.get(\"/thesis/review\",{\n          params: {\n            pageNum: this.currentPage,\n            pageSize: this.pageSize,\n            reviewer:user.username\n          }\n        }).then(res=>{\n          console.log(\"res\",res)\n          this.tableData=res.data.records\n          this.total=res.data.total\n        })\n      })\n    },\n    add(){\n      this.dialogVisible=true;\n      this.form={};\n\n    },\n    save() {\n      //保存评审结果\n      this.eval.thesisid=this.thesisid;\n      let userJson=sessionStorage.getItem(\"user\");\n      let user=JSON.parse(userJson)\n      console.log(\"this.eval.id\",this.eval.id)\n      this.eval.reviewer=user.username;\n      this.eval.grade1=this.dtableData[0].grade;\n      this.eval.grade2=this.dtableData[1].grade;\n      this.eval.grade3=this.dtableData[2].grade;\n      this.eval.grade4=this.dtableData[3].grade;\n      this.eval.grade5=this.dtableData[4].grade;\n      let total=0;\n      for(let i=0;i<this.dtableData.length;i++){\n        total=total+parseInt(this.dtableData[i].grade);\n      }\n      this.eval.total=total;\n      this.eval.qualified=this.qualified;\n      this.eval.comments=this.textarea;\n      this.eval.submitTime=new Date();\n      request.post(\"/grade\", this.eval).then(res => {\n          console.log(res)\n          if (res.code==='0') {\n            this.$message({\n              type: \"success\",\n              message: \"更新成功\"\n            })\n          } else {\n            this.$message({\n              type: \"error\",\n              message: res.msg\n            })\n          }\n          this.load()\n          // this.isfinish=1\n          this.dialogVisible=false\n\n        })\n      this.form.reviewednum=this.reviewednum+1\n      if(this.form.reviewednum==3){\n        this.form.status=3\n      }\n      this.savethesis()\n    },\n    handleEdit(row){\n      this.form=JSON.parse(JSON.stringify(row))\n      this.dialogVisible=true\n\n    },\n    handleSizeChange(pageSize){\n      this.pageSize=pageSize\n      this.load()\n\n    },\n    handleCurrentChange(pageNum){\n      this.currentPage=pageNum\n      this.load()\n\n    },\n    back(row){\n      let userJson=sessionStorage.getItem(\"user\");\n      let user=JSON.parse(userJson)\n      this.eval.reviewer=user.username;\n      console.log(row.thesisid,user.username)\n      request.get(\"/grade/returnID/\", {\n        params: {\n          thesisid:row.thesisid,\n          reviewer:user.username,\n          //option: this.options,\n        }\n      }).then(res => {\n        this.gradeid=res.data\n        console.log(\"this.gradeid\",this.gradeid)\n      })\n    },\n    handleDelete(row) {\n      request.delete(\"/grade/\" + this.gradeid).then(res => {\n        if (res.code ==='0') {\n          this.$message({\n            type: \"success\",\n            message: \"删除成功\"\n          })\n        } else {\n          this.$message({\n            type: \"error\",\n            message: res.msg\n          })\n        }\n        this.load()\n      })\n      this.form.status=\"1\"\n      this.form.id=row.id\n      console.log(\"row\",row)\n      this.form.reviewernum=row.reviewernum-1\n      this.savethesis()\n    },\n    savethesis(){\n      console.log(\"this.form.reviewednum\",this.form.reviewednum)\n      request.put(\"/thesis\", this.form)\n      console.log(\"putsuccess\")\n      this.load()\n    }\n\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.filePreview{\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  z-index: 999;\n  background: rgba($color: #000000, $alpha: 0.4);\n  min-height: 500px;\n  overflow: auto;\n  .filePreview_center{\n    width: 50%;\n    height: 100%;\n    left: 25%;\n    background: white;\n    border-top-right-radius: 3px;\n    border-top-left-radius: 3px;\n    position: relative;\n    transform: translateY(-50% -50%);\n    padding: 16px;\n    .center_header{\n      padding-bottom: 10px;\n      border-bottom: 1px solid #dee2ed;\n      display: flex;\n      align-items: center;\n      justify-content: space-between;\n      border-radius: 3px;\n      .header_left{\n        font-weight: bold;\n      }\n      .header_right{\n        cursor: pointer;\n        color: #99a1ad;\n      }\n    }\n    .center_center{\n      border-radius: 3px;\n      width: 100%;\n      height: 100%;\n    }\n  }\n}\n.el-pagination {\n  text-align: center;\n}\n</style>"]}]}