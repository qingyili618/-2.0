{"remainingRequest":"G:\\合并1.8\\vuereview\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-1!G:\\合并1.8\\vuereview\\src\\views\\Committee1.vue?vue&type=style&index=0&id=99763fe4&lang=scss&scoped=true","dependencies":[{"path":"G:\\合并1.8\\vuereview\\src\\views\\Committee1.vue","mtime":1639915033224},{"path":"G:\\合并1.8\\vuereview\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\合并1.8\\vuereview\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader-v16\\dist\\stylePostLoader.js","mtime":499162500000},{"path":"G:\\合并1.8\\vuereview\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"G:\\合并1.8\\vuereview\\node_modules\\sass-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\合并1.8\\vuereview\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\合并1.8\\vuereview\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQouY2xpY2stZGlzYWJsZXsNCiAgcG9pbnRlci1ldmVudHM6IG5vbmU7DQp9DQouZmlsZVByZXZpZXd7DQogIHBvc2l0aW9uOiBhYnNvbHV0ZTsNCiAgdG9wOiAwOw0KICBsZWZ0OiAwOw0KICB3aWR0aDogMTAwJTsNCiAgaGVpZ2h0OiAxMDAlOw0KICB6LWluZGV4OiA5OTk7DQogIGJhY2tncm91bmQ6IHJnYmEoJGNvbG9yOiAjMDAwMDAwLCAkYWxwaGE6IDAuNCk7DQogIG1pbi1oZWlnaHQ6IDUwMHB4Ow0KICBvdmVyZmxvdzogYXV0bzsNCiAgLmZpbGVQcmV2aWV3X2NlbnRlcnsNCiAgICB3aWR0aDogNTAlOw0KICAgIGhlaWdodDogMTAwJTsNCiAgICBsZWZ0OiAyNSU7DQogICAgYmFja2dyb3VuZDogd2hpdGU7DQogICAgYm9yZGVyLXRvcC1yaWdodC1yYWRpdXM6IDNweDsNCiAgICBib3JkZXItdG9wLWxlZnQtcmFkaXVzOiAzcHg7DQogICAgcG9zaXRpb246IHJlbGF0aXZlOw0KICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtNTAlIC01MCUpOw0KICAgIHBhZGRpbmc6IDE2cHg7DQogICAgLmNlbnRlcl9oZWFkZXJ7DQogICAgICBwYWRkaW5nLWJvdHRvbTogMTBweDsNCiAgICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjZGVlMmVkOw0KICAgICAgZGlzcGxheTogZmxleDsNCiAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7DQogICAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47DQogICAgICBib3JkZXItcmFkaXVzOiAzcHg7DQogICAgICAuaGVhZGVyX2xlZnR7DQogICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkOw0KICAgICAgfQ0KICAgICAgLmhlYWRlcl9yaWdodHsNCiAgICAgICAgY3Vyc29yOiBwb2ludGVyOw0KICAgICAgICBjb2xvcjogIzk5YTFhZDsNCiAgICAgIH0NCiAgICB9DQogICAgLmNlbnRlcl9jZW50ZXJ7DQogICAgICBib3JkZXItcmFkaXVzOiAzcHg7DQogICAgICB3aWR0aDogMTAwJTsNCiAgICAgIGhlaWdodDogMTAwJTsNCiAgICB9DQogIH0NCn0NCi5lbC1wYWdpbmF0aW9uIHsNCiAgdGV4dC1hbGlnbjogY2VudGVyOw0KfQ0K"},{"version":3,"sources":["G:\\合并1.8\\vuereview\\src\\views\\Committee1.vue"],"names":[],"mappings":"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","file":"G:/合并1.8/vuereview/src/views/Committee1.vue","sourceRoot":"","sourcesContent":["<template>\r\n  <div style=\"padding:10px\">\r\n    <div style=\"margin: 10px 0\">\r\n      <!--      <el-input v-model=\"search\" placeholder=\"请输入关键字\" style=\"width: 20%\" clearable></el-input>-->\r\n      <el-select v-model=\"academicYear\" style=\"margin-left: 5px\" placeholder=\"选择学年\">\r\n        <el-option\r\n            v-for=\"item in distinctYear\"\r\n            :key=\"item.academicYear\"\r\n            :label=\"item.academicYear\"\r\n            :value=\"item.academicYear\"\r\n        >\r\n        </el-option>\r\n      </el-select>\r\n      <el-select v-model=\"semester\" style=\"margin-left: 5px\" placeholder=\"选择学期\">\r\n        <el-option\r\n            v-for=\"item in semOptions\"\r\n            :key=\"item.semester\"\r\n            :label=\"item.label\"\r\n            :value=\"item.semester\"\r\n        >\r\n        </el-option>\r\n      </el-select>\r\n      <el-select v-model=\"type\" style=\"margin-left: 5px\" placeholder=\"选择论文类型\">\r\n        <el-option\r\n            v-for=\"item in typeOptions\"\r\n            :key=\"item.type\"\r\n            :label=\"item.label\"\r\n            :value=\"item.type\"\r\n        >\r\n        </el-option>\r\n      </el-select>\r\n      <el-button type=\"primary\" style=\"margin-left: 5px\" @click=\"load\">查询</el-button>\r\n    </div>\r\n    <div style=\"margin:10px 0 \">\r\n      请先选择学年、学科和论文类型\r\n    </div>\r\n    <!-- 表格区域-->\r\n    <el-table :data=\"tableData\"  :header-cell-style=\"{background:'#f5f7fa',color:'#02468f'}\" border style=\"width: 95%\">\r\n      <el-table-column prop=\"thesisid\" label=\"ID\" sortable align=\"center\" />\r\n      <el-table-column prop=\"title\" label=\"题目\" align=\"center\" />\r\n      <el-table-column prop=\"department\" label=\"所在系\" align=\"center\"/>\r\n      <el-table-column prop=\"submitTime\" value-format=\"YYYY-MM-DD\" label=\"提交时间\" align=\"center\"/>\r\n      <el-table-column prop=\"memo\" label=\"说明\" align=\"center\"/>\r\n      <el-table-column prop=\"url\" label=\"论文编号\" align=\"center\"/>\r\n\r\n\r\n      <!--点击按钮区域-->\r\n      <el-table-column fixed=\"right\" label=\"投票\" width=\"160\" align=\"center\">\r\n        <template #default=\"scope\">\r\n          <el-button size=\"mini\" type=\"primary\" @click=\"previewPDF(scope.row)\" :class=\"disable?'click-disable':''\" align=\"center\" v-show='this.flag==true'>投票</el-button>\r\n          <el-button size=\"mini\" type=\"primary\"  align=\"center\" v-show='this.flag==false'>已投票</el-button>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n\r\n    <div style=\"margin: 10px 0\">\r\n      <el-pagination\r\n          v-model:currentPage=\"currentPage\"\r\n          :page-sizes=\"[5, 10, 20]\"\r\n          :page-size=\"pageSize\"\r\n          layout=\"total, sizes, prev, pager, next, jumper\"\r\n          :total=\"total\"\r\n          @size-change=\"handleSizeChange\"\r\n          @current-change=\"handleCurrentChange\">\r\n      </el-pagination>\r\n\r\n      <!--弹窗批改区域-->\r\n      <el-dialog\r\n          v-model=\"dialogVisible\"\r\n          title=\"论文预览PDF\"\r\n          width=\"1250px\"\r\n          height=\"1000px\">\r\n        <div id=\"container\" style=\"width:100%;height:100%;overflow:hidden;\">\r\n\r\n          <div>\r\n            <iframe :src=\"pdfUrl\" frameborder=\"1\" style=\"width:700px;height:1000px;float:left;\"></iframe>\r\n          </div>\r\n          <div id=\"scoretable\" style=\"width:500px;padding-left:10px;float:left;\">\r\n            <!-- canvas渲染方式 -->\r\n            <el-form :model=\"form\" >\r\n              <el-form-item label=\"论文题目\">\r\n                <el-input v-model=\"form.title\" disabled></el-input>\r\n              </el-form-item>\r\n              <el-form-item label=\"论文编号\">\r\n                <el-input v-model=\"thesisid\" disabled></el-input>\r\n              </el-form-item>\r\n              <!--<el-row>\r\n                <el-col :span=\"6\"><div class=\"grid-content bg-purple\">评价指标</div></el-col>\r\n                <el-col :span=\"6\"><div class=\"grid-content bg-purple-light\">分值</div></el-col>\r\n                <el-col :span=\"6\"><div class=\"grid-content bg-purple\"></div>评价内容</el-col>\r\n                <el-col :span=\"6\"><div class=\"grid-content bg-purple-light\">评分</div></el-col>\r\n              </el-row> -->\r\n\r\n              <!--评分细节区域-->\r\n              <el-table :data=\"dtableData\" style=\"width: 100%\">\r\n                <div>专家评分</div>\r\n                <el-table-column label=\"总分\" prop=\"total\" />\r\n                <el-table-column label=\"综合评价\">\r\n                  <template #default=\"props\">\r\n                    <span v-if=\"props.row.qualified===1\">通过</span>\r\n                    <span v-if=\"props.row.qualified===2\">不通过</span>\r\n                  </template>\r\n                </el-table-column>\r\n\r\n                <el-table-column label=\"评价\" width=\"300\">\r\n                  <template #default=\"props\">\r\n                    <el-input v-model=\"props.row.comments\" :rows=\"4\" type=\"textarea\" disabled></el-input>\r\n                  </template>\r\n                </el-table-column>\r\n\r\n                <!--                <el-table-column label=\"选题与综述\" prop=\"grade1\" />-->\r\n                <!--                <el-table-column label=\"理论知识\" prop=\"grade2\" />-->\r\n                <!--                <el-table-column label=\"方法与能力\" prop=\"grade3\" />-->\r\n                <!--                <el-table-column label=\"应用价值\" prop=\"grade4\" />-->\r\n                <!--                <el-table-column label=\"论文写作\" prop=\"grade5\" />-->\r\n\r\n                <!--                <el-table-column label=\"综合评价\" prop=\"qualified\">-->\r\n                <!--                <div v-if=\"qualified===1\">通过</div>-->\r\n                <!--                <div v-if=\"qualified===2\">不通过</div>-->\r\n                <!--                </el-table-column>-->\r\n\r\n              </el-table>\r\n              <el-form-item label=\"投票评价\" style=\"padding-top:10px\">\r\n                <el-radio-group v-model=\"vote\" label=\"投票通过\"  >\r\n                  <el-radio :label=\"1\">通过</el-radio>\r\n                  <el-radio :label=\"2\">不通过</el-radio>\r\n                  <el-radio :label=\"3\">弃权</el-radio>\r\n                </el-radio-group>\r\n              </el-form-item>\r\n\r\n            </el-form>\r\n\r\n          </div>\r\n\r\n        </div>\r\n\r\n        <template #footer>\r\n          <span class=\"dialog-footer\">\r\n            <el-button @click=\"dialogVisible = false\">取消</el-button>\r\n\r\n            <el-button type=\"primary\" @click=\"save\">确定</el-button>\r\n          </span>\r\n        </template>\r\n      </el-dialog>\r\n\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n// @ is an alias to /src\r\n\r\n\r\nimport request from \"../utils/request\";\r\nimport pdf from \"@/components/pdf/pdf\";\r\nimport {ref} from 'vue';\r\nexport default {\r\n  name: 'committee',\r\n  components: {\r\n    pdf\r\n\r\n  },\r\n  data() {\r\n    return {\r\n      flag:true,\r\n      disable:false,\r\n      distinctYear:[],\r\n      academicYear:'',\r\n      semOptions:ref([\r\n        {\r\n          semester: '第一学期',\r\n          label: '第一学期',\r\n        },\r\n        {\r\n          semester: '第二学期',\r\n          label: '第二学期',\r\n        }]),\r\n      semester:ref(''),\r\n      typeOptions:ref([\r\n        {\r\n          type: '学硕',\r\n          label: '学硕',\r\n        },\r\n        {\r\n          type: '专硕',\r\n          label: '专硕',\r\n        }]),\r\n      type:ref(''),\r\n      batch:'',\r\n      form:{\r\n      },\r\n      eval: {\r\n        //thesisid: null,\r\n        reviewer: '',\r\n        total: null,\r\n        qualified: null,\r\n        vote:null,\r\n        comments: '',\r\n        submitTime: null,\r\n      },\r\n      message: '',\r\n      dialogVisible: false,\r\n      search:'',\r\n      currentPage: 1,\r\n      pageSize: 10,\r\n      total: 0,\r\n      tableData:[],\r\n      dtableData:[],\r\n      scr: null,\r\n      pdfPage: 1,\r\n      pageCount: 0,\r\n      pdfUrl: \"\",\r\n      evaluation: null,\r\n      thesisid: null,\r\n      committeeid: null,\r\n      vote: ref(1),\r\n      options: ref([\r\n        {\r\n          value: '2019-1',\r\n          label: '2019-1',\r\n        },\r\n        {\r\n          value: '2018-1',\r\n          label: '2018-1',\r\n        },\r\n      ]),\r\n      value: ref(''),\r\n    }\r\n  },\r\n\r\n  // created() {\r\n  //   this.load()\r\n  // },\r\n  mounted() {\r\n    this.getYear();\r\n  },\r\n  methods:{\r\n    //PDF论文预览\r\n    previewPDF(row){\r\n      this.thesisid=row.thesisid;\r\n      this.dialogVisible = true;\r\n      this.form=JSON.parse(JSON.stringify(row));\r\n      this.pdfUrl=\"/\"+row.url+\".pdf\";\r\n      // 请求获得专家打分数据进行显示\r\n      // console.log(row.url)\r\n      // console.log(row)\r\n      // console.log(this.form)\r\n      request.post(\"/committee/review\",this.form).then(res => {\r\n        console.log(res)\r\n        //渲染数据\r\n        this.dtableData = res.data\r\n        this.total = res.data.total\r\n      })\r\n\r\n    },\r\n\r\n    //关闭窗口初始化PDF页码\r\n    closeDialog(){\r\n      this.pdfPage = 1;\r\n    },\r\n\r\n    //PDF改变页数\r\n    previousPage(){\r\n      let p = this.pdfPage\r\n      p = p>1?p-1:this.pageCount\r\n      this.pdfPage = p\r\n    },\r\n    nextPage(){\r\n      let p = this.pdfPage\r\n      p = p<this.pageCount?p+1:1\r\n      this.pdfPage = p\r\n    },\r\n    getYear(){\r\n      request.put(\"/batch/distinctYear\").then(res=>{\r\n        console.log(res)\r\n        this.distinctYear=res.data\r\n        this.total=res.data.total\r\n      })\r\n    },\r\n    load(){\r\n      new Promise((resolve,reject)=>{\r\n        request.get(\"/batch/getbatchID\",{\r\n          params:{\r\n            year:this.academicYear,\r\n            semester:this.semester,\r\n            type:this.type\r\n          }\r\n        }).then(res=>{\r\n          console.log(res)\r\n          resolve(res.data)\r\n        })\r\n      }).then(res1=>{\r\n        console.log(res1)\r\n        this.batch = res1\r\n        request.get(\"/thesis\",{\r\n          params: {\r\n            pageNum: this.currentPage,\r\n            pageSize: this.pageSize,\r\n            status: \"11\",\r\n            batch:res1\r\n          }\r\n        }).then(res=>{\r\n          console.log(res)\r\n          this.tableData=res.data.records\r\n          this.total=res.data.total\r\n        })\r\n      })\r\n\r\n    },\r\n    add(){\r\n      this.dialogVisible=true;\r\n      this.form={};\r\n\r\n    },\r\n    save() {\r\n      if(this.vote==1){\r\n        this.form.id = 1;\r\n      }\r\n      else if(this.vote==2){\r\n        this.form.id = 2;\r\n      }\r\n      else{\r\n        this.form.id = 3;\r\n      }\r\n      console.log(this.vote);\r\n      console.log(this.thesisid,\"4444\",this.batch)\r\n      new Promise((resolve,reject)=> {\r\n        request.get(\"/committeevote/getcommitteeid\",{\r\n          params: {\r\n            thesisid:this.thesisid,\r\n            batch:this.batch\r\n          }\r\n        }).then(res=>{\r\n          console.log(res)\r\n          this.form.memo = res.data\r\n          // console.log(this.form)\r\n          resolve();\r\n        })\r\n      }).then(()=>{\r\n        console.log(this.form)\r\n        request.put('/committee/vote',this.form).then(res=>{\r\n          if (res.code === '0') {\r\n            this.$message({\r\n              type: \"success\",\r\n              message: \"投票成功\"\r\n            })\r\n            //sessionStorage.setItem(\"user\", JSON.stringify(this.form))\r\n            // 触发Layout更新用户信息\r\n            //this.$emit(\"userInfo\")\r\n            this.load()  //刷新表格的数据\r\n            this.dialogVisible = false //关闭弹窗\r\n          } else {\r\n            this.$message({\r\n              type: \"error\",\r\n              message: res.msg\r\n            })\r\n          }\r\n        })\r\n      })\r\n      this.disable = true\r\n      this.flag = false\r\n    },\r\n    handleEdit(row){\r\n      this.form=JSON.parse(JSON.stringify(row))\r\n      this.dialogVisible=true\r\n\r\n    },\r\n    handleSizeChange(pageSize){\r\n      this.pageSize=pageSize\r\n      this.load()\r\n\r\n    },\r\n    handleCurrentChange(pageNum){\r\n      this.currentPage=pageNum\r\n      this.load()\r\n\r\n    },\r\n\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.click-disable{\r\n  pointer-events: none;\r\n}\r\n.filePreview{\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  width: 100%;\r\n  height: 100%;\r\n  z-index: 999;\r\n  background: rgba($color: #000000, $alpha: 0.4);\r\n  min-height: 500px;\r\n  overflow: auto;\r\n  .filePreview_center{\r\n    width: 50%;\r\n    height: 100%;\r\n    left: 25%;\r\n    background: white;\r\n    border-top-right-radius: 3px;\r\n    border-top-left-radius: 3px;\r\n    position: relative;\r\n    transform: translateY(-50% -50%);\r\n    padding: 16px;\r\n    .center_header{\r\n      padding-bottom: 10px;\r\n      border-bottom: 1px solid #dee2ed;\r\n      display: flex;\r\n      align-items: center;\r\n      justify-content: space-between;\r\n      border-radius: 3px;\r\n      .header_left{\r\n        font-weight: bold;\r\n      }\r\n      .header_right{\r\n        cursor: pointer;\r\n        color: #99a1ad;\r\n      }\r\n    }\r\n    .center_center{\r\n      border-radius: 3px;\r\n      width: 100%;\r\n      height: 100%;\r\n    }\r\n  }\r\n}\r\n.el-pagination {\r\n  text-align: center;\r\n}\r\n</style>"]}]}